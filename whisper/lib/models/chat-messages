class ParentMessage {
  final int id;
  final String content;
  final String type;
  final String? media;
  final String senderName;

  ParentMessage({
    required this.id,
    required this.content,
    required this.type,
    this.media,
    required this.senderName,
  });

  factory ParentMessage.fromJson(Map<String, dynamic> json) {
    return ParentMessage(
      id: json['id'],
      content: json['content'],
      type: json['type'],
      media: json['media'],
      senderName: json['senderName'],
    );
  }

  Map<String, dynamic> toJson() {
    return {
      'id': id,
      'content': content,
      'type': type,
      'media': media,
      'senderName': senderName,
    };
  }

  @override
  String toString() {
    return 'ParentMessage('
        'id: $id, '
        'content: $content, '
        'type: $type, '
        'media: $media, '
        'senderName: $senderName'
        ')';
  }
}


class ChatMessage {
   int? id;
  final int chatId;
  final int? senderId;
  final String content;
  final bool? forwarded;
  final bool? pinned;
  final bool? selfDestruct;
  final int? expiresAfter;
  final String type;
  final bool? isSecret;
  final bool? isAnnouncement;
  final List<dynamic>? mentions;
   DateTime? time;
   DateTime? sentAt;
  final ParentMessage? parentMessage;

  ChatMessage({
    this.id,
    required this.chatId,
    this.senderId,
    required this.content,
    this.forwarded,
    this.pinned,
    this.selfDestruct,
    this.expiresAfter,
    required this.type,
    this.time,
    required this.sentAt,
    this.parentMessage,
    this.isSecret,
    this.isAnnouncement,
    this.mentions,
  });

    @override
  String toString() {
    return 'ChatMessage('
           'id: $id, '
           'chatId: $chatId, '
           'senderId: $senderId, '
           'content: $content, '
           'forwarded: $forwarded, '
           'pinned: $pinned, '
           'selfDestruct: $selfDestruct, '
           'expiresAfter: $expiresAfter, '
           'type: $type, '
           'isSecret: $isSecret, '
           'isAnnouncement: $isAnnouncement, '
           'mentions: $mentions, '
           'time: $time, '
           'sentAt: $sentAt, '
           'parentMessage: $parentMessage'
           ')';
  }

  factory ChatMessage.fromJson(Map<String, dynamic> json) {
    return ChatMessage(
      id: json['id'],
      chatId: json['chatId'],
      senderId: json['senderId'],
      content: json['content'],
      sentAt: DateTime.parse(json['sentAt']),
      forwarded: json['forwarded'],
      pinned: json['pinned'],
      selfDestruct: json['selfDestruct'],
      expiresAfter: json['expiresAfter'],
      type: json['type'],
      time: json['time'] != null ? DateTime.parse(json['time']) : null,
      isSecret: json['isSecret'],
      isAnnouncement: json['isAnnouncement'],
      mentions: json['mentions'],
      parentMessage: json['parentMessage'] != null
          ? ParentMessage.fromJson(json['parentMessage'])
          : null,
    );
  }

  Map<String, dynamic> toJson() {
    return {
      'id': id,
      'chatId': chatId,
      'senderId': senderId,
      'content': content,
      'sentAt': sentAt?.toIso8601String(),
      'forwarded': forwarded,
      'pinned': pinned,
      'selfDestruct': selfDestruct,
      'expiresAfter': expiresAfter,
      'type': type,
      'time': time?.toIso8601String(),
      'parentMessage': parentMessage?.toJson(),
      'isSecret': isSecret,
      'isAnnouncement': isAnnouncement,
      'mentions': mentions,
    };
  }
}
